\documentclass[12pt,a4paper,titlepage]{article}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[margin=3cm]{geometry}
\usepackage{textcomp}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{fix-cm}
\usepackage{graphicx}
\usepackage{etoolbox}
\usepackage{xcolor}
\usepackage{float}
\usepackage{ifthen}
\usepackage{multicol}
\usepackage{minted}
\usepackage{pgfplots}
\usepackage{tablefootnote}
\usepackage[margin=1cm]{caption}
\usepackage[bottom,marginal]{footmisc}
\usepackage[breaklinks=true]{hyperref}
\usepackage{cleveref}
\usepackage[backend=biber,style=numeric,natbib=true,sorting=none]{biblatex}
\usepackage[bachelorthesis]{systems-cover/systems-cover}
\pagestyle{fancy}
\setlength{\headheight}{30pt}
\renewcommand{\arraystretch}{1.5}
\newmintinline[code]{text}{}
\setminted{breaklines=true,fontsize=\small,autogobble=true}

\hypersetup{
  colorlinks,
  linkcolor={darkgray},
  citecolor={blue!50!black},
  urlcolor={blue!80!black}
}

\covernum{197b}
\covertitle{Implementation of a Benchmark Suite for Strymon}
\coverauthor{Nicolas Hafner}
\coverdate{November 2017 - May 2018}
\coversupervisedby{Dr.\ John Liagouris \\ Prof.\ Timothy Roscoe}

\addbibresource{content/references.bib}

\setcounter{biburllcpenalty}{7000}
\setcounter{biburlucpenalty}{8000}
\DeclareFieldFormat*{citetitle}{#1}
\DeclareFieldFormat{formaturl}{\newline #1}
\newbibmacro*{url+urldate}{%
  \printtext[formaturl]{%
    \printfield{url}}%
  \iffieldundef{urlyear}
  {}
  {\setunit*{\addspace}%
    \printtext[urldate]{\printurldate}}}

\newcommand{\citefulltitle}[1]{\citetitle*{#1}\cite{#1}}

\newcommand{\imagefigure}[3][]{\begin{figure}[H]%
    \centering%
    \includegraphics[width=1.0\linewidth]{#2}%
    \caption{#3}%
    \ifthenelse{ \equal{#1}{} }%
    {}%
    {\label{figure:#1}}%
  \end{figure}}

\usetikzlibrary{
  pgfplots.colorbrewer,
}
\pgfplotsset{
  % define a `cycle list' for marker
  cycle list/.define={my marks}{
    every mark/.append style={solid,fill=\pgfkeysvalueof{/pgfplots/mark list fill}},mark=*\\
    every mark/.append style={solid,fill=\pgfkeysvalueof{/pgfplots/mark list fill}},mark=square*\\
    every mark/.append style={solid,fill=\pgfkeysvalueof{/pgfplots/mark list fill}},mark=triangle*\\
    every mark/.append style={solid,fill=\pgfkeysvalueof{/pgfplots/mark list fill}},mark=diamond*\\
  },
}

\pgfplotsset{tikzDefaults/.style=
  {legend pos=outer north east,
    ymajorgrids=true,
    grid style=dashed,
    cycle list/Spectral-11,
    cycle multiindex* list={
      Spectral-11
      \nextlist
      my marks
      \nextlist
      [3 of]linestyles
      \nextlist
      very thick
      \nextlist},
  }}

\newcommand{\latencyplot}[1]{%
  \begin{tikzpicture}
    \begin{axis}[
      tikzDefaults,
      title={Median Latency (32 workers)},
      ylabel={Rate [e/s]},
      xlabel={Latency [s]},
      ymode=log,
      x tick label style={/pgf/number format/fixed},
      ]
      
      #1
    \end{axis}
  \end{tikzpicture}}

\newcommand{\latencyfigure}[3][]{\begin{figure}[H]%
    \centering
    \latencyplot{#2}%
    \caption{#3}%
    \ifthenelse{ \equal{#1}{} }%
    {}%
    {\label{figure:#1-latency}}%
  \end{figure}}

\newcommand{\scalingplot}[1]{%
  \begin{tikzpicture}
    \begin{axis}[
      tikzDefaults,
      title={Scaling (10'000'000e/s)},
      xlabel={Workers [n]},
      ylabel={Latency [s]},
      xmode=log,
      log basis x={2},
      scaled y ticks=false,
      y tick label style={/pgf/number format/fixed},
      xtick={1, 2, 4, 8, 16, 32},
      ]
      
      #1
    \end{axis}
  \end{tikzpicture}}

\newcommand{\scalingfigure}[3][]{\begin{figure}[H]%
    \centering
    \scalingplot{#2}%
    \caption{#3}%
    \ifthenelse{ \equal{#1}{} }%
    {}%
    {\label{figure:#1-scaling}}%
  \end{figure}}

\newcommand{\cdfplot}[1]{%
  \begin{tikzpicture}
    \begin{axis}[
      tikzDefaults,
      title={CDF (10'000'000e/s)},
      xlabel={Latency [s]},
      ylabel={CDF [\%]},
      xmode=log,
      ]
      
      #1
    \end{axis}
  \end{tikzpicture}}

\newcommand{\cdffigure}[3][]{\begin{figure}[H]%
    \centering
    \cdfplot{#2}%
    \caption{#3}%
    \ifthenelse{ \equal{#1}{} }%
    {}%
    {\label{figure:#1-cdf}}%
  \end{figure}}

\setcounter{secnumdepth}{4}
\titleformat{\paragraph}{\normalfont\normalsize\bfseries}{\theparagraph}{1em}{}
\titlespacing*{\paragraph}{0pt}{3.25ex plus 1ex minus .2ex}{1.5ex plus .2ex}

\newcommand{\tb}[1]{\textbf{#1}}
\newcommand{\ti}[1]{\textit{#1}}

\begin{document}
\input{content/abstract}
\input{content/acknowledgements}
\tableofcontents\newpage
\input{content/1-introduction}
\input{content/2-related-work}
\input{content/3-preliminaries}
\input{content/4-framework}
\input{content/5-ysb}
\input{content/6-hibench}
\input{content/7-nexmark}
\input{content/8-conclusion}
\newpage
\printbibliography
\end{document}
%%% Local Variables:
%%% mode: latex
%%% TeX-engine: luatex
%%% TeX-master: t
%%% TeX-command-extra-options: "-shell-escape"
%%% End:
